<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>GenAI Tracker</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üß†</text></svg>">
  <style>
    body {
      font-family: 'Inter', sans-serif;
      background: #f0f2f5;
      margin: 0;
      padding-top: 70px;
      color: #2c3e50;
    }

    /* Fixed Header */
    .header {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 60px;
      background: white;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 30px;
      z-index: 10;
    }

    .header span { font-weight: 500; }
    .name-edit { display: flex; gap: 8px; align-items: center; }
    .name-edit input {
      padding: 6px;
      font-size: 14px;
    }
    .name-edit button {
      padding: 6px 10px;
      font-size: 14px;
      background: #4CAF50;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }

    .container {
      max-width: 860px;
      margin: auto;
      background: white;
      border-radius: 12px;
      padding: 40px;
      box-shadow: 0 8px 25px rgba(0,0,0,0.06);
    }

    h1 { margin-bottom: 10px; font-size: 28px; }
    h2 { font-size: 20px; margin-top: 30px; border-bottom: 1px solid #ddd; padding-bottom: 5px; }

    .level { font-weight: 500; margin-top: 5px; }

    .progress-bar {
      height: 10px;
      background: #e0e0e0;
      border-radius: 20px;
      overflow: hidden;
      margin-top: 10px;
      margin-bottom: 20px;
    }
    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, #4CAF50, #81C784);
      width: 0%;
      transition: width 0.4s ease;
    }

    details {
      margin: 15px 0;
      border-left: 3px solid #ccc;
      padding-left: 15px;
    }
    summary {
      font-weight: bold;
      cursor: pointer;
      user-select: none;
      margin-bottom: 8px;
    }

    ul { list-style: none; padding-left: 0; margin: 0; }
    li {
      margin: 15px 0;
      background: #fafafa;
      padding: 15px;
      border-radius: 8px;
      box-shadow: 0 1px 4px rgba(0,0,0,0.03);
    }
    input[type="checkbox"] {
      margin-right: 10px;
      transform: scale(1.2);
    }
    a { color: #1a73e8; text-decoration: none; }
    a:hover { text-decoration: underline; }

    iframe {
      width: 100%;
      margin-top: 10px;
      border-radius: 8px;
    }

    .easter {
      margin-top: 30px;
    }

    .secret {
      margin-top: 20px;
      padding: 15px;
      background: #f0f9ff;
      border: 1px dashed #2196f3;
      border-radius: 6px;
      display: none;
    }

    /* Modal Overlay */
    .modal-overlay {
      position: fixed;
      top: 0; left: 0;
      width: 100vw; height: 100vh;
      background: rgba(0,0,0,0.4);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 999;
    }

    .modal {
      background: #fff;
      padding: 30px;
      border-radius: 10px;
      max-width: 500px;
      text-align: center;
      box-shadow: 0 4px 15px rgba(0,0,0,0.2);
    }

    .modal p {
      font-size: 16px;
      margin-bottom: 25px;
    }

    .modal .buttons {
      display: flex;
      justify-content: space-around;
    }

    .btn-confirm {
      padding: 10px 20px;
      border: none;
      color: white;
      font-weight: bold;
      border-radius: 6px;
      background: linear-gradient(to right, #43e97b, #38f9d7);
      cursor: pointer;
    }

    .btn-deny {
      padding: 10px 20px;
      border: none;
      color: white;
      font-weight: bold;
      border-radius: 6px;
      background: linear-gradient(to right, #b31217, #e52d27);
      cursor: pointer;
    }
  </style>
</head>
<body>
  <div class="header">
    <span>üß† Welcome, <strong id="nameDisplay">...</strong></span>
    <div class="name-edit">
      <input type="text" id="nameInput" placeholder="Change name..." />
      <button onclick="changeName()">Update</button>
    </div>
  </div>

  <div class="container">
    <h1>GenAI Tracker</h1>
    <div class="level" id="levelDisplay">Level: 1 | XP: 0</div>
    <div class="progress-bar"><div class="progress-fill" id="progressFill"></div></div>

    <h2>Milestones</h2>
    <details open>
      <summary>üìò Chapter 1: Foundations</summary>
      <ul>
        <li>
          <label><input type="checkbox" data-xp="15" />
          Read Chapter 1 of <a href="https://humanlikebook.com" target="_blank">HUMANLIKE</a></label>
        </li>
        <li>
          <label><input type="checkbox" data-xp="20" />
          Watch: What is Generative AI?</label>
          <iframe height="315" src="https://www.youtube.com/embed/LxgMdjyw8uw" frameborder="0" allowfullscreen></iframe>
        </li>
      </ul>
    </details>

    <details>
      <summary>üõ† Practice Tasks</summary>
      <ul>
        <li>
          <label><input type="checkbox" data-xp="20" />
          Complete <a href="https://canvanizer.com/new/business-model-canvas" target="_blank">GenAI Canvas</a></label>
        </li>
        <li>
          <label><input type="checkbox" data-xp="20" />
          Record a Loom explaining your project</label>
        </li>
      </ul>
    </details>

    <details>
      <summary>üß† Reflection</summary>
      <ul>
        <li><label><input type="checkbox" data-xp="10" />
          Self-evaluate your progress honestly</label></li>
        <li><label><input type="checkbox" data-xp="15" />
          Identify your key takeaway so far</label></li>
      </ul>
    </details>

    <div class="easter">
      <h2>üîì Unlock Goodies</h2>
      <input type="text" id="easterInput" placeholder="Type code from HUMANLIKE..." />
      <button onclick="checkEasterEgg()">Unlock</button>
      <div id="secretContent" class="secret">
        üéÅ <strong>Congrats!</strong> You‚Äôve unlocked the secret HUMANLIKE zone.<br>
        <a href="https://humanlikebook.com/bonus" target="_blank">Click here to download your goodies</a>.
      </div>
    </div>
  </div>

  <!-- MODAL -->
  <div class="modal-overlay" id="modalOverlay">
    <div class="modal">
      <p id="modalText"></p>
      <div class="buttons">
        <button class="btn-confirm" onclick="confirmModal()">Confirm</button>
        <button class="btn-deny" onclick="cancelModal()">Not Yet</button>
      </div>
    </div>
  </div>

  <script>
    const checkboxes = document.querySelectorAll('input[type="checkbox"]');
    const nameDisplay = document.getElementById('nameDisplay');
    const nameInput = document.getElementById('nameInput');
    const modalOverlay = document.getElementById('modalOverlay');
    const modalText = document.getElementById('modalText');

    let xp = parseInt(localStorage.getItem('xp')) || 0;
    let firstName = localStorage.getItem('firstName');
    let pendingCheckbox = null;

    function askNameIfNeeded() {
      if (!firstName) {
        firstName = prompt("Welcome! What‚Äôs your first name?");
        if (firstName) {
          localStorage.setItem("firstName", firstName);
        } else {
          firstName = "Learner";
        }
      }
      nameDisplay.textContent = firstName;
      nameInput.value = firstName;
    }

    function changeName() {
      const newName = nameInput.value.trim();
      if (newName && confirm(`Change your name to "${newName}"?`)) {
        localStorage.setItem('firstName', newName);
        firstName = newName;
        nameDisplay.textContent = newName;
      }
    }

    function updateUI() {
      const level = Math.floor(xp / 100) + 1;
      const progressPercent = (xp % 100);
      document.getElementById("levelDisplay").textContent = `Level: ${level} | XP: ${xp}`;
      document.getElementById("progressFill").style.width = progressPercent + "%";
    }

    function saveProgress() {
      const checked = [];
      checkboxes.forEach((cb, i) => {
        if (cb.checked) checked.push(i);
      });
      localStorage.setItem("checkedTasks", JSON.stringify(checked));
      localStorage.setItem("xp", xp);
    }

    checkboxes.forEach((box) => {
      box.addEventListener("change", () => {
        const xpVal = parseInt(box.dataset.xp);
        if (box.checked) {
          pendingCheckbox = box;
          modalText.innerText = `I, ${firstName}, confirm that I have fully completed this item by watching the entire video, reading all materials, or completing the exercise as instructed. I understand that this knowledge forms a foundation for upcoming content.`;
          modalOverlay.style.display = "flex";
        } else {
          xp -= xpVal;
          updateUI();
          saveProgress();
        }
      });
    });

    function confirmModal() {
      const xpVal = parseInt(pendingCheckbox.dataset.xp);
      xp += xpVal;
      updateUI();
      saveProgress();
      modalOverlay.style.display = "none";
      pendingCheckbox = null;
    }

    function cancelModal() {
      pendingCheckbox.checked = false;
      pendingCheckbox = null;
      modalOverlay.style.display = "none";
    }

    function loadProgress() {
      askNameIfNeeded();
      const checked = JSON.parse(localStorage.getItem("checkedTasks") || "[]");
      checked.forEach(i => {
        if (checkboxes[i]) {
          checkboxes[i].checked = true;
          xp += parseInt(checkboxes[i].dataset.xp);
        }
      });
      updateUI();
    }

    function checkEasterEgg() {
      const val = document.getElementById("easterInput").value.toLowerCase().trim();
      const codes = ["curiosity", "exploration", "kindness", "humanlike"];
      if (codes.includes(val)) {
        document.getElementById("secretContent").style.display = "block";
      }
    }

    loadProgress();
  </script>
</body>
</html>
